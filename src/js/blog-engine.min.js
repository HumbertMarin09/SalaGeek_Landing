window.BlogEngine=class{constructor(){this.articles=[],this.categories=[],this.filteredArticles=[],this.currentFilter="all",this.currentSort="newest",this.searchQuery="",this.articlesPerPage=6,this.currentPage=1}async init(){try{const e=await fetch("/blog/data/articles.json"),t=await e.json();return this.articles=t.articles,this.categories=t.categories,this.filteredArticles=[...this.articles],!0}catch(e){return console.error("❌ Error cargando artículos:",e),!1}}filterByCategory(e){this.currentFilter=e,this.currentPage=1,this.filteredArticles="all"===e?[...this.articles]:this.articles.filter(t=>t.category===e),this.applySearch(),this.sortArticles()}search(e){this.searchQuery=e.toLowerCase(),this.currentPage=1,this.applySearch(),this.sortArticles()}applySearch(){if(!this.searchQuery)return void(this.filteredArticles="all"===this.currentFilter?[...this.articles]:this.articles.filter(e=>e.category===this.currentFilter));const e="all"===this.currentFilter?this.articles:this.articles.filter(e=>e.category===this.currentFilter);this.filteredArticles=e.filter(e=>e.title.toLowerCase().includes(this.searchQuery)||e.excerpt.toLowerCase().includes(this.searchQuery)||e.tags.some(e=>e.toLowerCase().includes(this.searchQuery)))}sortArticles(){switch(this.currentSort){case"newest":this.filteredArticles.sort((e,t)=>new Date(t.publishDate)-new Date(e.publishDate));break;case"oldest":this.filteredArticles.sort((e,t)=>new Date(e.publishDate)-new Date(t.publishDate));break;case"popular":this.filteredArticles.sort((e,t)=>t.views-e.views)}}changeSort(e){this.currentSort=e,this.sortArticles()}getArticlesForCurrentPage(){const e=(this.currentPage-1)*this.articlesPerPage,t=e+this.articlesPerPage;return this.filteredArticles.slice(e,t)}getTotalPages(){return Math.ceil(this.filteredArticles.length/this.articlesPerPage)}goToPage(e){const t=this.getTotalPages();return e>=1&&e<=t&&(this.currentPage=e,!0)}getFeaturedArticles(e=3){return this.articles.filter(e=>e.featured).slice(0,e)}getTrendingArticles(e=6){return this.articles.filter(e=>e.trending).slice(0,e)}getRelatedArticles(e,t=3){const i=this.articles.find(t=>t.id===e);return i?this.articles.filter(t=>t.category===i.category&&t.id!==e).slice(0,t):[]}formatDate(e){const t=new Date(e);return`${t.getDate()} ${["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][t.getMonth()]} ${t.getFullYear()}`}generateArticleCard(e){this.getCategoryIcon(e.category);const t=this.formatDate(e.publishDate);return`\n      <article class="article-card" data-category="${e.category}" data-date="${e.publishDate}">\n        <a href="${e.content}" class="article-link">\n          <div class="article-image">\n            <img src="${e.image}" alt="${e.title}" loading="lazy" />\n            <span class="article-category">${e.categoryDisplay}</span>\n          </div>\n          <div class="article-content">\n            <h3 class="article-title">${e.title}</h3>\n            <p class="article-excerpt">${e.excerpt}</p>\n            <div class="article-meta">\n              <span class="meta-date">${t}</span>\n              <span class="meta-reading">${e.readTime}</span>\n            </div>\n          </div>\n        </a>\n      </article>\n    `}getCategoryIcon(e){return{series:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect>\n        <polyline points="17 2 12 7 7 2"></polyline>\n      </svg>',peliculas:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect>\n        <line x1="7" y1="2" x2="7" y2="22"></line>\n        <line x1="17" y1="2" x2="17" y2="22"></line>\n        <line x1="2" y1="12" x2="22" y2="12"></line>\n        <line x1="2" y1="7" x2="7" y2="7"></line>\n        <line x1="2" y1="17" x2="7" y2="17"></line>\n        <line x1="17" y1="17" x2="22" y2="17"></line>\n        <line x1="17" y1="7" x2="22" y2="7"></line>\n      </svg>',gaming:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <line x1="6" y1="12" x2="10" y2="12"></line>\n        <line x1="8" y1="10" x2="8" y2="14"></line>\n        <line x1="15" y1="13" x2="15.01" y2="13"></line>\n        <line x1="18" y1="11" x2="18.01" y2="11"></line>\n        <rect x="2" y="6" width="20" height="12" rx="2"></rect>\n      </svg>',anime:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>\n        <polyline points="2 17 12 22 22 17"></polyline>\n        <polyline points="2 12 12 17 22 12"></polyline>\n      </svg>',tecnologia:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>\n        <line x1="8" y1="21" x2="16" y2="21"></line>\n        <line x1="12" y1="17" x2="12" y2="21"></line>\n      </svg>'}[e]||""}renderArticles(e){const t=document.getElementById(e);if(!t)return;t.classList.add("js-initialized");const i=this.getArticlesForCurrentPage();if(0===i.length)return void(t.innerHTML='\n        <div class="no-results">\n          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <circle cx="11" cy="11" r="8"></circle>\n            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>\n          </svg>\n          <h3>No se encontraron artículos</h3>\n          <p>Intenta con otra búsqueda o categoría</p>\n        </div>\n      ');const r=t.querySelectorAll(".article-card");r.forEach(e=>e.classList.add("filtering-out")),setTimeout(()=>{t.innerHTML=i.map(e=>this.generateArticleCard(e)).join("");t.querySelectorAll(".article-card").forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(20px)",setTimeout(()=>{e.classList.add("fade-in"),e.style.opacity="1",e.style.transform="translateY(0)"},50*t)})},r.length>0?200:0)}renderPagination(e){const t=document.getElementById(e);if(!t)return;const i=this.getTotalPages();if(i<=1)return void(t.innerHTML="");let r='<div class="pagination">';this.currentPage>1&&(r+=`<button class="pagination-btn pagination-prev" data-page="${this.currentPage-1}">\n        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n          <polyline points="15 18 9 12 15 6"></polyline>\n        </svg>\n        Anterior\n      </button>`);for(let e=1;e<=i;e++)1===e||e===i||e>=this.currentPage-1&&e<=this.currentPage+1?r+=`<button class="pagination-btn ${e===this.currentPage?"active":""}" data-page="${e}">${e}</button>`:e!==this.currentPage-2&&e!==this.currentPage+2||(r+='<span class="pagination-dots">...</span>');this.currentPage<i&&(r+=`<button class="pagination-btn pagination-next" data-page="${this.currentPage+1}">\n        Siguiente\n        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n          <polyline points="9 18 15 12 9 6"></polyline>\n        </svg>\n      </button>`),r+="</div>",t.innerHTML=r}};
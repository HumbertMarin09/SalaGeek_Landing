const SalaGeekTheme=function(){"use strict";const e=!1,t={storageKey:"sala-geek-theme",themes:["dark","light"],defaultTheme:"dark",transitionDuration:300};let n=t.defaultTheme,o=null;function a(){const e=localStorage.getItem(t.storageKey);return e&&t.themes.includes(e)?e:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}function i(e){try{localStorage.setItem(t.storageKey,e)}catch(e){console.warn("Unable to save theme preference:",e)}}function r(e,a=!0){t.themes.includes(e)||(console.warn(`Invalid theme: ${e}`),e=t.defaultTheme),a&&document.documentElement.classList.add("theme-transitioning"),"light"===e?(document.documentElement.setAttribute("data-theme","light"),document.documentElement.classList.add("light-mode"),document.documentElement.classList.remove("dark-mode")):(document.documentElement.removeAttribute("data-theme"),document.documentElement.classList.remove("light-mode"),document.documentElement.classList.add("dark-mode")),n=e,function(){if(!o)return;const e="light"===n;o.setAttribute("aria-label",e?"Cambiar a modo oscuro":"Cambiar a modo claro"),o.setAttribute("title",e?"Modo oscuro":"Modo claro"),o.setAttribute("data-theme",n)}(),function(e){let t=document.querySelector('meta[name="theme-color"]');t||(t=document.createElement("meta"),t.name="theme-color",document.head.appendChild(t));t.content="light"===e?"#FFFFFF":"#0A0A0F"}(e),a&&setTimeout(()=>{document.documentElement.classList.remove("theme-transitioning")},t.transitionDuration),window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:e}}))}function l(){const e="dark"===n?"light":"dark";r(e,!0),i(e)}function d(){document.querySelector(".theme-toggle")?o=document.querySelector(".theme-toggle"):(o=document.createElement("button"),o.className="theme-toggle",o.type="button",o.setAttribute("aria-label","Cambiar tema"),o.setAttribute("title","light"===n?"Modo oscuro":"Modo claro"),o.innerHTML='\n      \x3c!-- Sol (mostrado en modo oscuro para cambiar a claro) --\x3e\n      <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">\n        <circle cx="12" cy="12" r="5"></circle>\n        <line x1="12" y1="1" x2="12" y2="3"></line>\n        <line x1="12" y1="21" x2="12" y2="23"></line>\n        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>\n        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>\n        <line x1="1" y1="12" x2="3" y2="12"></line>\n        <line x1="21" y1="12" x2="23" y2="12"></line>\n        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>\n        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>\n      </svg>\n      \x3c!-- Luna (mostrado en modo claro para cambiar a oscuro) --\x3e\n      <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">\n        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>\n      </svg>\n    ',o.addEventListener("click",l),function(){if(!o)return;const t=[".header-utils",".header-actions",".nav-utils",".language-selector",".site-header .container",".site-header nav",".main-nav .menu",".site-header","body"];for(const e of t){const t=document.querySelector(e);if(t)return void(".language-selector"===e?t.parentNode.insertBefore(o,t):".main-nav .menu"===e||e.includes("nav")?t.appendChild(o):"body"===e?(o.style.position="fixed",o.style.bottom="80px",o.style.right="20px",o.style.zIndex="9999",t.appendChild(o)):t.appendChild(o))}e}())}return{init:function(){const e=a();r(e,!1),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d(),function(){if(!window.matchMedia)return;const e=window.matchMedia("(prefers-color-scheme: light)"),n=e=>{localStorage.getItem(t.storageKey)||r(e.matches?"light":"dark",!0)};e.addEventListener?e.addEventListener("change",n):e.addListener&&e.addListener(n)}()},toggle:l,setTheme:function(e){t.themes.includes(e)&&(r(e,!0),i(e))},getTheme:()=>n,isLight:()=>"light"===n,isDark:()=>"dark"===n}}();SalaGeekTheme.init(),window.SalaGeekTheme=SalaGeekTheme,window.toggleTheme=SalaGeekTheme.toggle;